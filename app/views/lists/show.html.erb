<h1><%= @list.title %></h1>
<h3><%= @list.description %></h3>
<%= link_to "Create Task", new_list_task_path(@list.id), method: :get %>
<table id="myTable" class="tablesorter">
  <thead>
    <tr class="spacer">
      <th id="">Task</th>
      <th id="">Description</th>
      <th id="">Due Date</th>
      <th id="">Completed</th>
      <th id="">Options</th>
    </tr>
  </thead>
  <tbody>
    <% @list.tasks.each do |task| %>
      <tr class="search-item">
        <td id=""><a href="#"><%= task.title %></a></td>
        <td id=""><a href="#"><%= task.description %></a></td>
        <td id=""><a href="#"><%= task.due_date %></a></td>
        <td id=""><a href="#"><%= check_box_tag 'completed', task.id , task.status, :class => "task-check" %></a></td>
        <td id=""><a href="#"><%= button_to "Edit Task", edit_list_task_path(@list.id, task), method: :get %></a></td>
      <script type="text/javascript">
      $(".task-check").bind('change', function(){
      if (this.checked){
        $.ajax({
          url: '/lists/'+this.value+'/tasks/'+ <%= task.id %> +'/toggle',
          type: 'POST',
          data: {"status": this.checked}
        });
      }
      else {
        $.ajax({
          url: '/lists/'+this.value+'/tasks/'+ <%= task.id %> +'/toggle',
          type: 'POST',
          data: {"status": this.checked}
        });
      }
      });
      </script>
      </tr>
    <% end %>
  </tbody>
</table>


<%= link_to 'Completed Tasks', list_tasks_path(@list.id, status: true) %>
